<!DOCTYPE html>
<html  dir="ltr" lang="en" data-theme="light"><head>
    <title> Michael Holland | EzSpriteSheet: a free and open source sprite sheet creator </title>

    
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.116.1"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="Software, Data, Linux">
    
    
    
    <link rel="stylesheet"
        href="/css/main.min.353f34287745e2a43cf5668c1f7e293bf10104dd3a62f119f982d97f24a18562.css"
        integrity="sha256-NT80KHdF4qQ89WaMH34pO/EBBN06YvEZ&#43;YLZfyShhWI="
        crossorigin="anonymous"
        type="text/css">
    
    
    <link rel="stylesheet"
        href="/css/markupHighlight.min.bc108ac4d429f5e06afa75cfccb6585578f5198a03d669c1bd24b26e4a2895b7.css"
        integrity="sha256-vBCKxNQp9eBq&#43;nXPzLZYVXj1GYoD1mnBvSSybkoolbc="
        crossorigin="anonymous"
        type="text/css">
    
    <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" 
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" 
    crossorigin="anonymous" />
    
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="256x256" href="/favicon-256x256.png">
    <link rel="icon" type="image/png" sizes="144x144" href="/favicon-144x144.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/favicon-128x128.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/favicon-64x64.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="24x24" href="/favicon-24x24.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <link rel="canonical" href="/post/ezspritesheet/">

    
    
    
    
    <script type="text/javascript"
            src="/js/anatole-header.min.d0408165d31a17f17bba83038bf54e86121f85021bdf936382e636f0f77a952f.js"
            integrity="sha256-0ECBZdMaF/F7uoMDi/VOhhIfhQIb35NjguY28Pd6lS8="
            crossorigin="anonymous"></script>


    
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://holland.sh/images/site-feature-image.png"/>

<meta name="twitter:title" content="EzSpriteSheet: a free and open source sprite sheet creator"/>
<meta name="twitter:description" content="Making sprite sheets has never been easier: toss a folder at my new program and watch magic happen! This blogpost details both why and how I created a new tool to solve a common obstacle in low-level game development. EzSpriteSheet was a month-long commitment."/>


    

</head>
<body>
<header><div class="page-top  . ">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
    <nav>
        <ul class="nav__list" id="navMenu">
            <div class="nav__links">
                
                
                    
                    <li><a 
                        href="/"
                                
                        title="">Home</a></li>
                
                
            </div>
            <li>
                
            </li>
        </ul>
    </nav>
</div>
</header>
<div class="wrapper">
    <aside><div class="sidebar . ">
    <div class="sidebar__content">
        <div class="logo-title">
            <div class="title">
                <img src="/images/profile.jpg" alt="profile picture">
                <h3 title=""><a href="/">Michael Holland</a></h3>
                <div class="description">
                    <p>Software, Data, Linux</p>
                </div>
            </div>
        </div>
        <ul class="social-links">
            
                <li>
                    <a href="https://github.com/z64me" rel="me" aria-label="GitHub">
                        <i class="fab fa-github fa-2x" aria-hidden="true"></i>
                    </a>
                </li>
            
        </ul>
    </div><footer class="footer footer--sidebar">        
    <div class="by_farbox">
        <ul class="footer__list">
            <li class="footer__item">&copy;
                
                    2018 - 2024
                
            </li>
            
            <li class="footer__item">
                <a href="/post/"  title="">
                    archives
                </a>
            </li>
            
            <li class="footer__item">
                <a href="/post/index.xml"  title="">
                    rss
                </a>
            </li>
            
        </ul>
    </div>
</footer>

<script type="text/javascript"
        src="/js/medium-zoom.min.44288fd315b6cda68c1f4743caad56535c0f81a5b5a672f385e82b3896575c1d.js"
        integrity="sha256-RCiP0xW2zaaMH0dDyq1WU1wPgaW1pnLzhegrOJZXXB0="
        crossorigin="anonymous"></script></div>
</aside>
    <main>
        <div class="autopagerize_page_element">
            <div class="content">
    <div class="post  . ">
        <div class="post-content">
            
            <img class="post-thumbnail" src="/thumbnails/ezspritesheet.png" alt="Thumbnail image">
            
            <div class="post-title">
                <h1>EzSpriteSheet: a free and open source sprite sheet creator</h1>
                
                    <div class="info">
                        <em class="fas fa-calendar-day"></em>
                        <span class="date"> 
                                                Sat, Jan 15, 2022
                                           </span>
                        <em class="fas fa-stopwatch"></em>
                        <span class="reading-time">6-minute read</span>
                    </div>
                
            </div>

            <p>Making sprite sheets has never been easier: toss a folder at my new program and watch magic happen! This blogpost details both why and how I created a new tool to solve a common obstacle in low-level game development. EzSpriteSheet was a month-long commitment.</p>
<p><img src="/images/ezspritesheet.png" alt="image"></p>
<h2 id="motivation">Motivation</h2>
<p>I enjoy developing games from scratch. Managing sprite assets is usually a nightmare, though. The common approach involves &ldquo;squashing&rdquo; all the sprite animations into individual sprite strips, but this is unideal to me because information like frame timing is lost in the process. Additionally, duplicate animation frames are not able to be optimized away, there may be a lot of wasted padding pixels around each sprite, and you still have to worry about pivot points.</p>
<p>To me, the ideal structure for organizing sprites is a directory of nested folders containing animated GIF&rsquo;s/WEBP&rsquo;s, with the desired timing and pivot information already baked into each one. This way, assets delivered by the artists can easily be dropped in and used immediately. All the other sprite sheet software I tried was lacking in these departments, so I decided to create my own.</p>
<p><img src="/images/ezspritesheet-gallery.gif" alt="image"></p>
<h2 id="multiple-user-interfaces">Multiple user interfaces</h2>
<p>I enjoy using the command line. One of its biggest strengths is in automating processes. Once I decide on the parameters I want for generating a sprite sheet, I can add that command to my game&rsquo;s build script and have it rebuild the sprite sheets automatically anytime the directory contents change. You don&rsquo;t get that kind of flexibility with a GUI application! And retrofitting a GUI onto a CLI application is easier than vice versa, so I wanted to program the CLI first.</p>
<p>As the word implies, an <strong>interface</strong> gives the user a method of <strong>interfacing</strong> with the program. The same core functionality is exposed to the user by both interfaces. It&rsquo;s only the way the user experiences the program that&rsquo;s different. Think of it like this:</p>
<p><img src="/images/ezspritesheet-layout.png" alt="image"></p>
<p>My command line interface looks like this. If you run the program without providing any arguments, it tells you how to use it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/*********************************
</span></span><span class="line"><span class="cl"> * EzSpriteSheet v1.0.0 &lt;z64.me&gt; *
</span></span><span class="line"><span class="cl"> *********************************/
</span></span><span class="line"><span class="cl">--Necessary Arguments--------------------------------------------------
</span></span><span class="line"><span class="cl">  -i, --input     specify input directory where assets are organized
</span></span><span class="line"><span class="cl">  -o, --output    specify output image database file
</span></span><span class="line"><span class="cl">  -s, --scheme    select which export scheme to use
</span></span><span class="line"><span class="cl">                    supported export schemes:
</span></span><span class="line"><span class="cl">                      xml
</span></span><span class="line"><span class="cl">                      json
</span></span><span class="line"><span class="cl">                      c99
</span></span><span class="line"><span class="cl">  -m, --method    select packing method
</span></span><span class="line"><span class="cl">                    supported packing methods:
</span></span><span class="line"><span class="cl">                      guillotine  (fastest, worst)
</span></span><span class="line"><span class="cl">                      maxrects    (slowest, best)
</span></span><span class="line"><span class="cl">  -a, --area      specify area of generated sprite sheet
</span></span><span class="line"><span class="cl">                  width by height, e.g. --area 1024x1024
</span></span><span class="line"><span class="cl">--Optional Arguments----------------------------------------------------
</span></span><span class="line"><span class="cl">  -h, --help      prints this usage information
</span></span><span class="line"><span class="cl">  -e, --exhaust   exhaustive packing (doesn&#39;t consider a sprite
</span></span><span class="line"><span class="cl">                  sheet ready until it has tried fitting every
</span></span><span class="line"><span class="cl">                  remaining unpacked sprite into it)
</span></span><span class="line"><span class="cl">  -r, --rotate    rotate sprites when doing so saves space
</span></span><span class="line"><span class="cl">  -t, --trim      trim excess pixels from around sprites
</span></span><span class="line"><span class="cl">  -d, --doubles   detect and omit duplicate sprites (doubles)
</span></span><span class="line"><span class="cl">  -b, --border    add padding around each packed sprite
</span></span><span class="line"><span class="cl">                  e.g. --border 8 (for 8 pixels)
</span></span><span class="line"><span class="cl">  -c, --color     treat pixels matching hex color as animation pivots
</span></span><span class="line"><span class="cl">                  e.g. --color 00ff00
</span></span><span class="line"><span class="cl">                  (complains if multiple possible matches are found)
</span></span><span class="line"><span class="cl">  -f, --formats   include only images of formats in comma-delimited
</span></span><span class="line"><span class="cl">                  list, e.g. --formats &#34;gif,webp,png&#34;
</span></span><span class="line"><span class="cl">  -p, --prefix    append a prefix to each sprite&#39;s name when exporting
</span></span><span class="line"><span class="cl">                  e.g. --prefix &#34;extras/&#34;
</span></span><span class="line"><span class="cl">  -z, --long      use each sprite&#39;s long name during export
</span></span><span class="line"><span class="cl">                  e.g. write &#39;player/walk.gif&#39; instead of &#39;player/walk&#39;
</span></span><span class="line"><span class="cl">  -x, --regex     include only images with a file path matching
</span></span><span class="line"><span class="cl">                  an optional POSIX regular expression
</span></span><span class="line"><span class="cl">  -n, --negate    include only images with a file path NOT matching
</span></span><span class="line"><span class="cl">                  the provided --regex pattern
</span></span><span class="line"><span class="cl">  -v, --visual    visualize sprite boundaries (debug feature)
</span></span><span class="line"><span class="cl">                  (makes each sprite&#39;s background a random color)
</span></span><span class="line"><span class="cl">  -l, --log       specify log file (stderr is used otherwise)
</span></span><span class="line"><span class="cl">  -w, --warnings  log only errors and warnings
</span></span><span class="line"><span class="cl">  -q, --quiet     don&#39;t log anything
</span></span></code></pre></div><p>As for the GUI, I used Qt. The packaged <a href="https://en.wikipedia.org/wiki/Qt_Creator">Qt Creator</a> has a really nice WYSIWYG editor for creating GUI&rsquo;s. I used it to design the main window, pictured below:</p>
<p><img src="/images/ezspritesheet-qtcreator.png" alt="image"></p>
<h2 id="external-libraries-are-a-life-saver">External libraries are a life saver</h2>
<p>When I program something, I want to make the thing that I&rsquo;m making, not the components necessary to make the thing that I&rsquo;m making. And that&rsquo;s where external libraries come into the picture. They already exist, the work has already been done, and they are already battle-tested. Use them! The developers want you to!</p>
<p>For example, Google&rsquo;s <a href="https://developers.google.com/speed/webp/download">libwebp</a> includes a helper function for loading both animated GIF&rsquo;s (using <a href="https://sourceforge.net/projects/giflib/">giflib</a>) and animated WEBP&rsquo;s. Copying that into my project saved me a lot of time.</p>
<p>I also used the public domain <a href="https://github.com/juj/RectangleBinPack">RectangleBinPack</a> for the rectangle packing. A full list of libraries I used can be found in the <strong>Attribution</strong> section of this blogpost.</p>
<h2 id="reference-implementations">Reference implementations</h2>
<p>I wanted to make it easy for people to adopt EzSpriteSheet, so I provided reference implementations. I have written two so far: one in C using SDL2 for rendering, and another in JavaScript using an HTML5 canvas. Both display animated sprites on the screen, and demonstrate how to use EzSpriteSheet&rsquo;s output in a meaningful way.</p>
<p>Try the JavaScript demo live in your web browser: <a href="https://z64.me/bin/ezspritesheet.js">https://z64.me/bin/ezspritesheet.js</a></p>
<p><img src="/images/ezspritesheet-demo.gif" alt="image"></p>
<h2 id="quality-assurance">Quality assurance</h2>
<p>It&rsquo;s important that programs work consistently and reliably. It should never crash. And the same input should always produce the same output. Undefined behavior should never occur, and if it does, don&rsquo;t take it lightly.</p>
<p>For example: even one variable/allocation left uninitialized can make or break a program for some users but not others, because different CPUs handle stack variable initialization differently. Some will zero-initialize them while advancing the stack pointer, some will not. Then you get unexpected values, hence undefined behavior.</p>
<p>The process will vary across programming languages and across operating systems, but my favorite software for this when writing C/C++ code on Linux—which is the case for this project—is Valgrind. It helps avoid surprises like the scenario described above by checking for all of the following:</p>
<ul>
<li>Uninitialized variable/memory usage</li>
<li>Invalid memory access</li>
<li>Memory leaks</li>
</ul>
<p>Running Valgrind on Linux is easy once you have it installed: you run the same command you always run when testing your program, with the same arguments etc, but you prefix it with <strong>valgrind</strong>, like so:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">echo &#34;Hello, world!&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">becomes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">valgrind echo &#34;Hello, world!&#34;
</span></span></code></pre></div><p>When I run it on my program:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">==993667== 
</span></span><span class="line"><span class="cl">==993667== HEAP SUMMARY:
</span></span><span class="line"><span class="cl">==993667==     in use at exit: 0 bytes in 0 blocks
</span></span><span class="line"><span class="cl">==993667==   total heap usage: 43,399 allocs, 43,399 frees, 57,924,516 bytes allocated
</span></span><span class="line"><span class="cl">==993667== 
</span></span><span class="line"><span class="cl">==993667== All heap blocks were freed -- no leaks are possible
</span></span><span class="line"><span class="cl">==993667== 
</span></span><span class="line"><span class="cl">==993667== For lists of detected and suppressed errors, rerun with: -s
</span></span><span class="line"><span class="cl">==993667== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
</span></span></code></pre></div><p>This is what you want: Valgrind is happy! Publish that code with confidence!</p>
<h2 id="its-already-being-used-in-a-production-environment">It&rsquo;s already being used in a production environment</h2>
<p>This racing game (<a href="https://store.steampowered.com/app/764420/Rogue_Racer/">Rogue Racer on Steam</a>) uses EzSpriteSheet to produce a texture atlas for its HUD elements:</p>
<p><img src="/images/ezspritesheet-production.png" alt="image"></p>
<h2 id="features">Features</h2>
<p>As of this writing, EzSpriteSheet is more feature-rich than its competition:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>TexturePacker</th>
<th>EzSpriteSheet</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rotate sprites to save space</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>Add padding around packed sprites</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>Detect and omit duplicate sprites</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>Trim excess pixels from around sprites</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>Users can write their own export modules</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>Automatic pivot point detection</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>Supports animated GIF&rsquo;s</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>Supports animated WEBP&rsquo;s</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>Open source</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>Price</td>
<td>$39.99 per 2 computers</td>
<td>Free</td>
</tr>
</tbody>
</table>
<h2 id="you-read-that-right-its-open-source">You read that right: it&rsquo;s open source</h2>
<p>And you can find it on <a href="https://github.com/z64me/EzSpriteSheet">GitHub.com/z64me/EzSpriteSheet</a></p>
<h2 id="attribution">Attribution</h2>
<p>The following libraries and software made this project possible:</p>
<ul>
<li><a href="https://github.com/nothings/stb">stb</a></li>
<li><a href="https://sourceforge.net/projects/giflib/">giflib</a></li>
<li><a href="https://developers.google.com/speed/webp/download">libwebp</a></li>
<li><a href="https://www.pcre.org/">libpcre2</a></li>
<li><a href="https://www.qt.io/">QtCreator</a></li>
<li><a href="https://github.com/juj/RectangleBinPack">RectangleBinPack</a></li>
<li>Sprite art courtesy of <a href="https://twitter.com/DynoPunch">@DynoPunch</a></li>
</ul></div>
        <div class="post-footer">
            <div class="info">
                
                <span class="separator"><a class="tag" href="/tags/fun/">fun</a><a class="tag" href="/tags/articles/">articles</a><a class="tag" href="/tags/programming/">programming</a><a class="tag" href="/tags/c/">c</a><a class="tag" href="/tags/c&#43;&#43;/">c&#43;&#43;</a><a class="tag" href="/tags/javascript/">javascript</a><a class="tag" href="/tags/web/">web</a><a class="tag" href="/tags/ui/">ui</a><a class="tag" href="/tags/ux/">ux</a></span>
            </div>
        </div>

        
    </div>


            </div>
        </div>
    </main>
</div><footer class="footer footer--base">        
    <div class="by_farbox">
        <ul class="footer__list">
            <li class="footer__item">&copy;
                
                    2018 - 2024
                
            </li>
            
            <li class="footer__item">
                <a href="/post/"  title="">
                    archives
                </a>
            </li>
            
            <li class="footer__item">
                <a href="/post/index.xml"  title="">
                    rss
                </a>
            </li>
            
        </ul>
    </div>
</footer>

<script type="text/javascript"
        src="/js/medium-zoom.min.44288fd315b6cda68c1f4743caad56535c0f81a5b5a672f385e82b3896575c1d.js"
        integrity="sha256-RCiP0xW2zaaMH0dDyq1WU1wPgaW1pnLzhegrOJZXXB0="
        crossorigin="anonymous"></script></body>

</html>
